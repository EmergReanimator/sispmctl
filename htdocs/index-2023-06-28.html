<!DOCTYPE html>
<html lang="en">
<head>
  <title>SIS-PM Control for Linux</title>
  <meta http-equiv="CONTENT-TYPE" content="text/html; charset=utf-8">
  <meta name="description" content="Linux support for USB Outlet SIS PM / Intelli-Plug">
  <meta name="keywords" content="linux,usb,usb outlet,sis pm,intelli plug,intelliplug,intelli-plug,sis-pm">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="css/default.css">
</head>
<body>
<div id="container">
  <div id="header">
    <div id="logo">
    <img src="sispmctl.svg" height="100" alt="SisPMCtl Logo">
SiS-PM Control for Linux
<span style="float: right;">
<a href="https://sourceforge.net/projects/sispmctl/files/latest/download"><img alt="Download Silver Shield PM Control for Linux" height=40 src="https://a.fsdn.com/con/app/sf-download-button?button_size=2x"></a>
<a href="https://snapcraft.io/sispmctl"><img alt="Get it from the Snap Store" height=40 src="https://snapcraft.io/static/images/badges/en/snap-store-black.svg"></a>
</span>
    </div>
  </div>
  <div id="main">
<span style="float: right;"><img alt="Sis-PM image" src="SIS-PM-banner.jpg" style="width: 100px; height: 59px;"></span>
<h1><a class="mozTocH2" id="mozTocId835268"></a>Overview</h1>
<p><b>SIS-PM Control for Linux</b> (sispmctl) is an application for
managing USB controlled powerstrips produced by
<a href="http://www.gembird.com/">GEMBIRD LTD</a>.
Newer devices are sold under the Energenie brand.
The following devices are supported:</p>
<ul>
<li>Gembird MSIS-PM</li>
<li>Gembird Silver Shield SIS-PM (aka Revolt Intelliplug)</li>
<li>Gembird Silver Shield SIS-PMS</li>
<li>Energenie EG-PM</li>
<li>Energenie EG-PMS</li>
<li>Energenie EG-PM2</li>
<li>Energenie EG-PMS2</li>
</ul>
<p>The software is licensed under
<a href="./LICENSE">The GNU General Public License (GPL) Version 2</a>.
This excludes any warranty but gives you the right to redistribute the
software.</p>
<h1><a class="mozTocH2" id="mozTocId413887"></a>Identifying devices</h1>
<p>The devices can be identified by their USB vendor and product IDS using the
lsb command.
Here is an example:</p>
<pre>
$ lsusb
Bus 001 Device 007: ID 04b4:fd13 Cypress Semiconductor Corp. Energenie EG-PMS
</pre>
<p>Devices with the following vendor and product IDs are currently supported.</p>
<table style="text-align: left;">
<tbody>
<tr><th>Name</th><th>Vendor ID, Product ID</th><th>Number of Sockets</th></tr>
<tr><td>Gembird MSIS-PM</td><td>04b4:fd10</td><td>1</td></tr>
<tr><td>Gembird SIS-PM</td><td>04b4:fd11</td><td>4</td></tr>
<tr><td>Gembird MSIS-PM</td><td>04b4:fd12</td><td>1</td></tr>
<tr><td>Gembird SIS-PMS, Energenie EG-PMS</td><td>04b4:fd13</td><td>4</td></tr>
<tr><td>Energenie EG-PMS2</td><td>04b4:fd15</td><td>4</td></tr>
  </tbody>
</table>
<h1><a class="mozTocH2" id="mozTocId312888"></a>Supported Operating Systems</h1>
<p>Generally all POSIX compatible operating systems with support of libusb
should work, e.g.</p>
<ul>
<li>Debian - package sispmctl</li>
<li>Gentoo Linux - package sys-power/sispmctl</li>
<li>openSUSE - community packages are available</li>
<li>OpenWRT - package utils/sispmctl</li>
<li>Ubuntu - package sispmctl</li>
</ul>
<p>There have been reports that siscpmctl was successfully compiled and worked
under:</p>
<ul>
<li>Solaris 10</li>
<li>MacOS X 10.4 and MacOS X 10.5</li>
</ul>
<p>Sispmctl is mostly processor architecture agnostic.
It has been reported to run on</p>
<ul>
<li>x86</li>
<li>ARM</li>
<li>MIPS</li>
<li>PowerPC</li>
<li>RISC-V</li>
</ul>
<h1><a class="mozTocH2" id="mozTocId127686"></a>Download and Installation</h1>
Many Linux distribution package sispmctl. E.g on Debian and Ubuntu you can
install sispmctl using
<pre>
sudo apt-get update
sudo apt-get install sispmctl
</pre>
Sispmctl is also available as <a href="https://snapcraft.io/sispmctl">snap</a>.
If you have the snapd daemon installed, you can install the snap with
<pre>
sudo snap install sispmctl
</pre>
If you want to use the most current code download the source from Sourceforge
and build it yourself:
Either download a release tarball
<a href="http://sourceforge.net/project/showfiles.php?group_id=159834">sispm_ctl-XX.tar.gz</a>
or clone the git repository:
<pre>
git clone https://git.code.sf.net/p/sispmctl/git sispmctl
</pre>
Then build with
<pre>
./autogen.sh # only needed after checkout of the Git repository
./configure
make
sudo make install
sudo ldconfig
</pre>
You need libusb-0.15 or newer installed on your system.
<h1><a class="mozTocH2" id="mozTocId756141"></a>Usage</h1>
<p>The sispmctl utility is called from the command line. The
following documentation is an excerpt from the man-page of sispmctl (included in
distribution):
</p>
<p><b>SYNOPSIS</b></p>
<ul>
<li>sispmctl -s</li>
<li>sispmctl [ -q ] [ -n ] [ -d 0... ] [ -D ... ] -b &lt;on|off&gt;</li>
<li>sispmctl [ -q ] [ -n ] [ -d 0... ] [ -D ... ] &lt; -o | -f | -t | -g | -m &gt; &lt;1..4|all&gt;</li>
<li>sispmctl [ -q ] [ -n ] [ -d 0... ] [ -D ... ] &lt; -a | -A &gt; &lt;1..4|all&gt; [ --Aat '...' ] [ --Aafter ... ] [ --Ado  &lt;on|off&gt; ] ... [ --Aloop ... ]</li>
<li>sispmctl [ -d 0... ] [ -D ... ] [ -i &lt;ip&gt;]  [ -p &lt;#port&gt; ] [ -u &lt;path&gt; ] -l</li>
</ul>
<b>OPTIONS</b>
<ul>
<li>-h print usage information</li>
<li>-s scan for supported GEMBIRD devices</li>
<li>-l daemonize and start listening as a simple http webserver (default port: 2638)</li>
<li>-L start listening as a simple http webserver without daemonizing</li>
<li>-p IP network port (default: 2638) for listener. There is no authentication implemented yet.</li>
<li>-u give  the  directory path where pages lie, that are served (default: /usr/local/share/doc/sispmctl/skin.  The Web path component is completely ignored for security reasons.</li>
<li>-b switch the buzzer on and off</li>
<li>-o switch the given outlet(s) to "ON"</li>
<li>-f switch the given outlet(s) to "OFF"</li>
<li>-t toggle the state of the given outlet(s)</li>
<li>-g show the status of the given outlet(s)</li>
<li>-m get power supply status for the given outlet(s)</li>
<li>-d Use not the first but the given device in the sequence of detected devices, starting with "0" for the first device (see scan option)</li>
<li>-D Same as -d, but choose by serial number (see scan option)</li>
<li>-U Same as -d, but choose by USB Bus:Device the device is connected to (e.g. 001:003)</li>
<li>-n do not print "ON" and "OFF", but "1" and "0" instead</li>
<li>-q do neither print explanations nor disclaimers except it is requested</li>
<li>-a get schedule for given outlet</li>
<li>-A set schedule for given outlet
<ul>
<li>--Aat date - sets an event time as a date '%Y-%m-%d %H:%M' in the current
local time zone (not considering day light saving time switches)</li>
<li>--Aafter N - sets an event time as N minutes after the previous one</li>
<li>--Ado &lt;on|off&gt; - sets the current event's action</li>
<li>--Aloop N  - loops to 1st event's action after N minutes</li>
</ul></li>
<li>-v print version and copyright</li>
</ul>
<div>
<p><b>WEB INTERFACE</b></p>
<a href="web_interface.png"><img alt="Sispmctl Web Interface" src="web_interface.png" height=96em style="float: left; margin: .5em .5em .5em .0em;"></a>
<p>The sispmctl program provides a web interface when started with
the -l option. No additional http server is needed. Each selected
usb device is blocked by pmctl while running.</p>
<p>After installation, the first of three web-interfaces is selected.
The default location of the HTML files is /usr/local/httpd/sispm_ctl/doc which
is a symbolic link to /usr/local/httpd/sispm_ctl/skin1.</p>
<p>The http capabilities of sispmctl are limited. Technically
speaking, only the first line of each http request is parsed. The
terminating path component, i.e. file name, is looked up in
the repository directory. If present the file is parsed and in
absence of control sequences sent as is. The files must
include the http header portion.</p>
<p>Control sequences start and end with double dollar
`$$'. They consist of a command portion separated by a
question mark `?' from alternative outputs which are separated by the first
colon `:'. The command portion is a token followed by an
embraced number that references the outlet,
e.g. $$command(1)?positive:negative$$ while command is one of
status, toggle, off , on . It is strongly recommended to avoid the
on/off/toggle commands in pages that may be reloaded. Best is
to redirect to other pages that only include status requests.
</p>
</div>
<p><b>EXAMPLES</b></p>
<p>Switch off the first outlet of the first SiS-PM and the
third outlet of the second SiS-PM:<p>
<pre>
$ sispmctl -f 1 -d 1 -f 3
</pre>
<p>Print the status of the forth outlet as zero or one:</p>
<pre>
$ sispmctl -nqg 4
</pre>
<p>Run pmctl on the second device as a web-server:</p>
<pre>
$ sispmctl -d 1 -l
</pre>
<p>You can connect to it from the same machine by pointing to
http://localhost:2638 with your webbrowser</p>
<h1><a class="mozTocH2" id="mozTocId461891"></a>Permissions</h1>
<p>Per default, only root is allowed to use devices directly, therefore the SiS-PM
also only works as root.</p>
<p>To allow group sispmctl access create file /lib/udev/rules.d/60-sispmctl.rules
with the following content</p>
<pre><code>SUBSYSTEM=="usb", ATTR{idVendor}=="04b4", ATTR{idProduct}=="fd10", GROUP="sispmctl", MODE="660"
SUBSYSTEM=="usb", ATTR{idVendor}=="04b4", ATTR{idProduct}=="fd11", GROUP="sispmctl", MODE="660"
SUBSYSTEM=="usb", ATTR{idVendor}=="04b4", ATTR{idProduct}=="fd12", GROUP="sispmctl", MODE="660"
SUBSYSTEM=="usb", ATTR{idVendor}=="04b4", ATTR{idProduct}=="fd13", GROUP="sispmctl", MODE="660"
SUBSYSTEM=="usb", ATTR{idVendor}=="04b4", ATTR{idProduct}=="fd15", GROUP="sispmctl", MODE="660"
</code></pre>
<p>Then reload the udev rules with</p>
<pre><code>udevadm control --reload-rules
</code></pre>
<h1><a class="mozTocH2" id="mozTocId434726"></a>Contact</h1>
For questions, bug reports, remarks use the
<a href="https://sourceforge.net/p/sispmctl/discussion/539852/">forum</a>
of Sourceforge.net.<span style="font-family: monospace;"></span>
</div>
<div id="links">
<ul>
<li><a href="#mozTocId835268">Overview</a></li>
<li><a href="#mozTocId413887">Identifying devices</a></li>
<li><a href="#mozTocId312888">Supported Operating Systems</a></li>
<li><a href="#mozTocId127686">Download and Installation</a></li>
<li><a href="#mozTocId756141">Usage</a></li>
<li><a href="#mozTocId461891">Permissions</a></li>
<li><a href="#mozTocId434726">Contact</a></li>
</ul>
</div>
<div id="footer">
<p>Last modified: 2023-06-28</p>
</div>
</div>
</body>
</html>
